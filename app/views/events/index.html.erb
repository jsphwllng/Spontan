
<div class="container">
<h1 style="color:white">Index for all events</h1>
<br>

<div class="d-flex justify-content-center" style="margin-bottom: 10px;">
		<div class="searchbar-keyword">
			<%= form_tag events_path, method: :get do %>
			<%= text_field_tag :query_event,
			params[:query_event],
			class: "form-control form-start",
				placeholder: "By Keyword"%>
			</div>
			<div class="searchbar-range">
				<%= select_tag :query_location, options_for_select(([['Range', 25],['2 Km', 2], ['5 Km', 5], ['10 Km', 10], ['25 Km', 25]]),
				params[:query_location]), {class: 'form-control form-middle', placeholder: "Range"}	%>		
			</div>

			<div class="searchbar-category">
				<%= select_tag :query_category, options_for_select((["sports", "party", "drinking", "social", "yoga", "spiritual", "dancing", "misc", "studying", "political", "food", "board games", "culture"]),
				params[:query_category]), {class: 'form-control form-end', placeholder: "Category", prompt: "Category"}	%>
			</div>
				<%= submit_tag "Whatever", class: "searchbar-submit-button" %>
				<% end %>
			</div>
		</div>


		<!-- map -->
		<br>
		<div id="map"
		style="width: 100%; height: 350px;"
		data-markers="<%= @markers.to_json %>"
		data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>

		<!-- cards -->
		<div class="d-flex flex-wrap justify-content-around">
			<div class= "d-flex flex-wrap justify-content-around mx-auto" style="margin-top: 50px; margin-left: 50px; margin-right: 50px">
		<% @events.each do |event| %>

		<div onclick="location.href='<%= event_path(event) %>';" class="card event-card text-white bg-dark mb-3" style="max-width: 13rem; min-height: 10rem">
			<% if event.photo.attached? %>
			<div class="event-image-container">
				<%= cl_image_tag event.photo.key, class:"event-image" %>
			</div>
			<% elsif %>
			<div class="event-image-container">
				<img src="<%= image_path('default-image.png') %>" class="event-image">
			</div>
			<% end %>



			<!--Giving each category the assigned image-tag -->
			<% if event.category == "sports" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-SPORTS.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "party" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-PARTY.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "drinking" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-DRINKING.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "social" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-SOCIAL.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "yoga" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-YOGA.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "spiritual" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-SPIRITUAL.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "dancing" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-DANCING.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "misc" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-MISC.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "studying" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-STUDYING.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "political" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-POLITICAL.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "food" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-FOOD.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "board games" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-BOARD-GAMES.png') %>" class="category-tag">
			</div>
			<% elsif event.category == "culture" %>
			<div class="event-card-tag-container">
				<img src="<%= image_path('Category-tag-CULTURE.png') %>" class="category-tag">
			</div>
			<% end %>


			<div class="card-body">
					<!--Headline of the card -->
					<div class="event-card-h1">
						<%= event.title.capitalize %>
					</div>

					<div class="card-footer text-muted" style="align-self: flex-end;">
						<p class="card-location"><i class="fas fa-map-marker-alt"></i> <%= event.location %></p>
					</div>
			</div>

		</div>
		<% end %>
		</div>
</div>
